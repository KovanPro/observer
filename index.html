<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Observer Assignment Management System</title>
    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

    <link rel="stylesheet" href="assets/css/style.css">
</head>
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

<body>
    <div class="container">
        <header>
            <h1>📋 سیستەمێ دانانا چاڤدێران پەیمانگەها ڕەند</h1>
            <nav class="main-nav">
                <button class="nav-btn active" data-page="dashboard">پەرێ سەرەکی</button>
                <button class="nav-btn" data-page="teachers">ماموستا</button>
                <button class="nav-btn" data-page="subjects">بابەت</button>
                <button class="nav-btn" data-page="exams">ئەزمون</button>
                <button class="nav-btn" data-page="assignments">چاڤدێر</button>
                <button class="nav-btn" data-page="exclusions">بهێنڤەدان</button>
                <button class="nav-btn" data-page="history">مێژو</button>
            </nav>
        </header>

        <main>
            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <h2>Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>ژمارا ماموستایا</h3>
                        <p id="stat-teachers">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>ژامرا بابەتا</h3>
                        <p id="stat-subjects">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>ئەزمونێت بهێن</h3>
                        <p id="stat-exams">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>چاڤدێری</h3>
                        <p id="stat-assignments">-</p>
                    </div>
                </div>
                <div class="quick-actions">
                    <h3>کریارێن ب لەز</h3>
                    <button class="btn btn-primary" onclick="showPage('assignments')">دانانا چڤدێران</button>
                    <button class="btn btn-secondary" onclick="showPage('exams')"> زێدەکرنا ئەزمونان</button>
                    <button class="btn btn-secondary" onclick="showPage('teachers')">زێدەکرنا ماموستایان</button>
                </div>
            </div>

            <!-- Teachers Page -->
            <div id="teachers" class="page">
                <h2>Teachers Management</h2>
                <div class="page-header">
                    <button class="btn btn-primary" onclick="openTeacherModal()">+ Add Teacher</button>
                </div>
                <div class="table-container">
                    <table id="teachers-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Subjects Page -->
            <div id="subjects" class="page">
                <h2>Subjects Management</h2>
                <div class="page-header">
                    <button class="btn btn-primary" onclick="openSubjectModal()">+ Add Subject</button>
                    <select id="filter-dept" onchange="loadSubjects()">
                        <option value="">All Departments</option>
                    </select>
                    <select id="filter-stage" onchange="loadSubjects()">
                        <option value="">All Stages</option>
                    </select>
                </div>
                <div class="table-container">
                    <table id="subjects-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Subject Name</th>
                                <th>Department</th>
                                <th>Stage</th>
                                <th>Teachers</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Exams Page -->
            <div id="exams" class="page">
                <h2>Exams Management</h2>
                <div class="page-header">
                    <button class="btn btn-primary" onclick="openExamModal()">+ Add Exam</button>
                    <div class="filters">
                        <div class="form-group">
                            <label>بەروار:</label>
                            <input type="date" id="filter-exam-date" onchange="loadExams()">
                        </div>
                        <div class="form-group">
                            <label>گەر:</label>
                            <select id="filter-exam-shift" onchange="loadExams()">
                                <option value="">هەموو گەرەکان</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>بەش:</label>
                            <select id="filter-exam-dept" onchange="loadExams()">
                                <option value="">هەموو بەشەکان</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table id="exams-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Date</th>
                                <th>Shift</th>
                                <th>Subject</th>
                                <th>Department</th>
                                <th>Stage</th>
                                <th>Evening</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Assignments Page -->
            <div id="assignments" class="page">
                <h2>دانانا چاڤدێران</h2>
                <div class="assignment-controls">
                    <div class="form-group">
                        <label>  بەروارا ئەزمونێ :</label>
                        <input type="date" id="assignment-date" required>
                    </div>
                    <div class="form-group">
                        <label>گەر:</label>
                        <select id="assignment-shift" required>
                            <option value="">گەرێ ب هەلبژێرە</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="generateAssignments()">دانانا چاڤدێرا</button>
                    <button class="btn btn-danger" onclick="deleteAssignments()"> ژێبرنا چاڤدێرا</button>
                </div>
                <div id="assignment-result"></div>
                <div class="table-container">
                    <table id="assignments-table">
                        <thead>
                            <tr>
                                <th>گەر</th>
                                <th>کەرت</th>
                                <th>چاڤدێر</th>
                             </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="export-section">
                    <!-- <button class="btn btn-secondary" onclick="exportAssignments()">Export to CSV</button> -->
                    <!-- <button class="btn btn-secondary" onclick="printAssignments()">Print</button> -->
                    <button class="btn btn-primary" onclick="exportAssignmentsPdf()">Export to PDF</button>
                    <button class="btn btn-primary" onclick="exportAssignmentsExcel()">Export to excle</button>
                </div>
            </div>

            <!-- Exclusions Page -->
            <div id="exclusions" class="page">
                <h2>بهێن ڤەدان</h2>
                <div class="page-header">
                    <button class="btn btn-primary" onclick="openExclusionModal()">زێدەکرن بو لیستا بهێنڤەدانێ</button>
                </div>
                <div class="table-container">
                    <table id="exclusions-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>ماموستا</th>
                                <th>بەروار</th>
                                <th>گەر</th>
                                <th>ئەگەر</th>
                                <th>کردار</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- History Page -->
            <div id="history" class="page">
                <h2>Assignment History</h2>
                <div class="page-header">
                    <input type="date" id="history-date" onchange="loadHistory()">
                    <select id="history-shift" onchange="loadHistory()">
                        <option value="">All Shifts</option>
                    </select>
                </div>
                <div class="table-container">
                    <table id="history-table">
                        <thead>
                            <tr>
                                <th>بەروار</th>
                                <th>گەر</th>
                                <th>کەرت</th>
                                <th>ماموستا</th>
                                <th>کردار</th>
                                <th>دەم</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Teacher Modal -->
    <div id="teacher-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('teacher-modal')">&times;</span>
            <h2 id="teacher-modal-title">Add Teacher</h2>
            <form id="teacher-form">
                <input type="hidden" id="teacher-id">
                <div class="form-group">
                    <label>Teacher Name:</label>
                    <input type="text" id="teacher-name" required>
                </div>
                <div class="form-group">
                    <label>Status:</label>
                    <select id="teacher-status">
                        <option value="1">Available</option>
                        <option value="0">Unavailable</option>
                    </select>
                </div>
                <div class="info-box" style="background: #d1ecf1; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
                    <small>Note: Teachers can teach in any department. No department selection needed.</small>
                </div>
                <button type="submit" class="btn btn-primary">Save</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('teacher-modal')">Cancel</button>
            </form>
        </div>
    </div>

    <!-- Subject Modal -->
    <div id="subject-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('subject-modal')">&times;</span>
            <h2 id="subject-modal-title">زێدەکرنا بابەتی </h2>
            <form id="subject-form">
                <input type="hidden" id="subject-id">
                <div class="form-group">
                    <label>ناڤێ بابەتی  :</label>
                    <input type="text" id="subject-name" required>
                </div>
                <div class="form-group">
                    <label>بەش:</label>
                    <select id="subject-dept" required onchange="loadStagesForSubject()">
                        <option value="">بەشی ب هەلبژێرە</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>گوناغ:</label>
                    <select id="subject-stage" required>
                        <option value="">قوناغێ ب هەلبژێرە</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ماموستا:</label>
                    <div id="subject-teachers"></div>
                </div>
                <button type="submit" class="btn btn-primary">Save</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('subject-modal')">Cancel</button>
            </form>
        </div>
    </div>

    <!-- Exam Modal -->
    <div id="exam-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('exam-modal')">&times;</span>
            <h2 id="exam-modal-title">زێدەکرنا ئەزمونێ</h2>
            <form id="exam-form">
                <input type="hidden" id="exam-id">
                <div class="form-group">
                    <label>بەروارا ئەزمونێ:</label>
                    <input type="date" id="exam-date" required>
                </div>
                <div class="form-group">
                    <label>گەر:</label>
                    <select id="exam-shift" required>
                        <option value="">گەرا : </option>
                    </select>
                </div>
                <div class="form-group">
                    <label>بەش:</label>
                    <select id="exam-department" required onchange="loadStagesForExam()">
                        <option value="">بەشی ب هەلبژێرە</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>قۆناغ:</label>
                    <select id="exam-stage" required onchange="loadSubjectsForExam()">
                        <option value="">قۆناغی ب هەلبژێرە</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>بابەت:</label>
                    <select id="exam-subject" required>
                        <option value="">بابەتی ب هەلبژێرە</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Save</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('exam-modal')">Cancel</button>
            </form>
        </div>
    </div>

    <!-- Exclusion Modal -->
    <div id="exclusion-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('exclusion-modal')">&times;</span>
            <h2>فورما زێدەکرنا ب‌هێنڤەدانێ</h2>
            <form id="exclusion-form">
                <input type="hidden" id="exclusion-id">
                <div class="form-group">
                    <label>ماموستا:</label>
                    <select id="exclusion-teacher" required>
                        <option value="">ماموستای هەلبژێرە</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>بەروار:</label>
                    <input type="date" id="exclusion-date" required>
                </div>
                <div class="form-group">
                    <label>گەر:</label>
                    <select id="exclusion-shift" required>
                        <option value=""> گەرا ئەزمونێ ب هەلبژێرە </option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ئەگەر:</label>
                    <textarea id="exclusion-reason"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Save</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('exclusion-modal')">Cancel</button>
            </form>
        </div>
    </div>

    <script src="assets/js/app.js"></script>
</body>
</html>

