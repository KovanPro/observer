<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Observer Assignment Management System</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ“‹ Exam Observer Assignment Management System</h1>
            <nav class="main-nav">
                <button class="nav-btn active" data-page="dashboard">Dashboard</button>
                <button class="nav-btn" data-page="teachers">Teachers</button>
                <button class="nav-btn" data-page="subjects">Subjects</button>
                <button class="nav-btn" data-page="exams">Exams</button>
                <button class="nav-btn" data-page="assignments">Assignments</button>
                <button class="nav-btn" data-page="exclusions">Exclusions</button>
                <button class="nav-btn" data-page="history">History</button>
            </nav>
        </header>

        <main>
            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <h2>Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Teachers</h3>
                        <p id="stat-teachers">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total Subjects</h3>
                        <p id="stat-subjects">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>Upcoming Exams</h3>
                        <p id="stat-exams">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>Active Assignments</h3>
                        <p id="stat-assignments">-</p>
                    </div>
                </div>
                <div class="quick-actions">
                    <h3>Quick Actions</h3>
                    <button class="btn btn-primary" onclick="showPage('assignments')">Generate Assignments</button>
                    <button class="btn btn-secondary" onclick="showPage('exams')">Add New Exam</button>
                    <button class="btn btn-secondary" onclick="showPage('teachers')">Add New Teacher</button>
                </div>
            </div>

            <!-- Teachers Page -->
            <div id="teachers" class="page">
                <h2>Teachers Management</h2>
                <div class="page-header">
                    <button class="btn btn-primary" onclick="openTeacherModal()">+ Add Teacher</button>
                </div>
                <div class="table-container">
                    <table id="teachers-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Subjects Page -->
            <div id="subjects" class="page">
                <h2>Subjects Management</h2>
                <div class="page-header">
                    <button class="btn btn-primary" onclick="openSubjectModal()">+ Add Subject</button>
                    <select id="filter-dept" onchange="loadSubjects()">
                        <option value="">All Departments</option>
                    </select>
                    <select id="filter-stage" onchange="loadSubjects()">
                        <option value="">All Stages</option>
                    </select>
                </div>
                <div class="table-container">
                    <table id="subjects-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Subject Name</th>
                                <th>Department</th>
                                <th>Stage</th>
                                <th>Teachers</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Exams Page -->
            <div id="exams" class="page">
                <h2>Exams Management</h2>
                <div class="page-header">
                    <button class="btn btn-primary" onclick="openExamModal()">+ Add Exam</button>
                    <input type="date" id="filter-exam-date" onchange="loadExams()">
                </div>
                <div class="table-container">
                    <table id="exams-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Date</th>
                                <th>Shift</th>
                                <th>Subject</th>
                                <th>Department</th>
                                <th>Stage</th>
                                <th>Evening</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Assignments Page -->
            <div id="assignments" class="page">
                <h2>Observer Assignments</h2>
                <div class="assignment-controls">
                    <div class="form-group">
                        <label>Exam Date:</label>
                        <input type="date" id="assignment-date" required>
                    </div>
                    <div class="form-group">
                        <label>Shift:</label>
                        <select id="assignment-shift" required>
                            <option value="">Select Shift</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="generateAssignments()">Preview Assignments</button>
                    <button class="btn btn-secondary" onclick="savePreviewedAssignments()">Save Assignments</button>
                    <button class="btn btn-danger" onclick="deleteAssignments()">Delete Assignments</button>
                </div>
                <div id="assignment-result"></div>
                <div class="table-container">
                    <table id="assignments-table">
                        <thead>
                            <tr>
                                <th>Shift</th>
                                <th>Section</th>
                                <th>Observer 1</th>
                                <th>Observer 2</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="export-section">
                    <button class="btn btn-secondary" onclick="exportAssignments()">Export to CSV</button>
                    <button class="btn btn-secondary" onclick="printAssignments()">Print</button>
                    <button class="btn btn-primary" onclick="exportAssignmentsPdf()">Export to PDF</button>
                </div>
            </div>

            <!-- Exclusions Page -->
            <div id="exclusions" class="page">
                <h2>Manual Exclusions</h2>
                <div class="page-header">
                    <button class="btn btn-primary" onclick="openExclusionModal()">+ Add Exclusion</button>
                </div>
                <div class="table-container">
                    <table id="exclusions-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Teacher</th>
                                <th>Date</th>
                                <th>Shift</th>
                                <th>Reason</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- History Page -->
            <div id="history" class="page">
                <h2>Assignment History</h2>
                <div class="page-header">
                    <input type="date" id="history-date" onchange="loadHistory()">
                    <select id="history-shift" onchange="loadHistory()">
                        <option value="">All Shifts</option>
                    </select>
                </div>
                <div class="table-container">
                    <table id="history-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Shift</th>
                                <th>Section</th>
                                <th>Teacher</th>
                                <th>Action</th>
                                <th>Time</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Teacher Modal -->
    <div id="teacher-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('teacher-modal')">&times;</span>
            <h2 id="teacher-modal-title">Add Teacher</h2>
            <form id="teacher-form">
                <input type="hidden" id="teacher-id">
                <div class="form-group">
                    <label>Teacher Name:</label>
                    <input type="text" id="teacher-name" required>
                </div>
                <div class="form-group">
                    <label>Status:</label>
                    <select id="teacher-status">
                        <option value="1">Available</option>
                        <option value="0">Unavailable</option>
                    </select>
                </div>
                <div class="info-box" style="background: #d1ecf1; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
                    <small>Note: Teachers can teach in any department. No department selection needed.</small>
                </div>
                <button type="submit" class="btn btn-primary">Save</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('teacher-modal')">Cancel</button>
            </form>
        </div>
    </div>

    <!-- Subject Modal -->
    <div id="subject-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('subject-modal')">&times;</span>
            <h2 id="subject-modal-title">Add Subject</h2>
            <form id="subject-form">
                <input type="hidden" id="subject-id">
                <div class="form-group">
                    <label>Subject Name:</label>
                    <input type="text" id="subject-name" required>
                </div>
                <div class="form-group">
                    <label>Department:</label>
                    <select id="subject-dept" required onchange="loadStagesForSubject()">
                        <option value="">Select Department</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Stage:</label>
                    <select id="subject-stage" required>
                        <option value="">Select Stage</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Teachers:</label>
                    <div id="subject-teachers"></div>
                </div>
                <button type="submit" class="btn btn-primary">Save</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('subject-modal')">Cancel</button>
            </form>
        </div>
    </div>

    <!-- Exam Modal -->
    <div id="exam-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('exam-modal')">&times;</span>
            <h2 id="exam-modal-title">Add Exam</h2>
            <form id="exam-form">
                <input type="hidden" id="exam-id">
                <div class="form-group">
                    <label>Exam Date:</label>
                    <input type="date" id="exam-date" required>
                </div>
                <div class="form-group">
                    <label>Shift:</label>
                    <select id="exam-shift" required>
                        <option value="">Select Shift</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Subject:</label>
                    <select id="exam-subject" required>
                        <option value="">Select Subject</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Save</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('exam-modal')">Cancel</button>
            </form>
        </div>
    </div>

    <!-- Exclusion Modal -->
    <div id="exclusion-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('exclusion-modal')">&times;</span>
            <h2>Add Manual Exclusion</h2>
            <form id="exclusion-form">
                <input type="hidden" id="exclusion-id">
                <div class="form-group">
                    <label>Teacher:</label>
                    <select id="exclusion-teacher" required>
                        <option value="">Select Teacher</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Date:</label>
                    <input type="date" id="exclusion-date" required>
                </div>
                <div class="form-group">
                    <label>Shift:</label>
                    <select id="exclusion-shift" required>
                        <option value="">Select Shift</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Reason:</label>
                    <textarea id="exclusion-reason"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Save</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('exclusion-modal')">Cancel</button>
            </form>
        </div>
    </div>

    <script src="assets/js/app.js"></script>
</body>
</html>

